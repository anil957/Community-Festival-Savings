<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Festival Velam Fund Manager - Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="navbar-container">
            <h2 class="navbar-title">Festival Velam Fund Manager</h2>
            <div class="navbar-right">
                <span class="username-display">Welcome, <strong id="displayUsername">Admin</strong></span>
                <button id="logoutBtn" class="logout-btn">Logout</button>
            </div>
        </div>
    </nav>

    <!-- Main Dashboard -->
    <div class="dashboard-container">
        <!-- Summary Cards -->
        <section class="summary-section">
            <h2>Fund Summary</h2>
            <div class="cards-grid">
                <div class="card total-fund">
                    <h3>Total Fund Collected</h3>
                    <p class="card-value" id="totalFund">₹0</p>
                </div>
                <div class="card total-interest">
                    <h3>Total Interest Earned</h3>
                    <p class="card-value" id="totalInterest">₹0</p>
                </div>
                <div class="card total-sheep">
                    <h3>Total Sheep Expense</h3>
                    <p class="card-value" id="totalSheep">₹0</p>
                </div>
                <div class="card top-borrower">
                    <h3>Top Borrower</h3>
                    <p class="card-value" id="topBorrower">-</p>
                </div>
            </div>
        </section>

        <!-- Input Forms Section -->
        <section class="input-section">
            <div class="form-container">
                <!-- Monthly Contribution Form -->
                <div class="form-block">
                    <h3>Add Monthly Contribution</h3>
                    <form id="contributionForm" class="input-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="monthName">Month Name</label>
                                <input type="text" id="monthName" placeholder="e.g., January" required>
                            </div>
                            <div class="form-group">
                                <label for="collectedAmount">Amount Collected (₹)</label>
                                <input type="number" id="collectedAmount" placeholder="e.g., 5500" required>
                            </div>
                            <div class="form-group">
                                <label for="interestEarned">Interest Earned (₹)</label>
                                <input type="number" id="interestEarned" placeholder="e.g., 500" required>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">Add Contribution</button>
                    </form>
                </div>

                <!-- Sheep Expense Form -->
                <div class="form-block">
                    <h3>Add Sheep Festival Expense</h3>
                    <form id="sheepExpenseForm" class="input-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="festivalName">Festival/Event Name</label>
                                <input type="text" id="festivalName" placeholder="e.g., Diwali Festival" required>
                            </div>
                            <div class="form-group">
                                <label for="sheepExpenseAmount">Amount Spent (₹)</label>
                                <input type="number" id="sheepExpenseAmount" placeholder="e.g., 2000" required>
                            </div>
                            <div class="form-group">
                                <label for="sheepCount">Number of Sheep</label>
                                <input type="number" id="sheepCount" placeholder="e.g., 3" required>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">Add Expense</button>
                    </form>
                </div>

                <!-- Money Taken Form -->
                <div class="form-block">
                    <h3>Record Money Taken</h3>
                    <form id="moneyTakenForm" class="input-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="personName">Person Name</label>
                                <input type="text" id="personName" placeholder="e.g., Raj Kumar" required>
                            </div>
                            <div class="form-group">
                                <label for="amountTaken">Amount Taken (₹)</label>
                                <input type="number" id="amountTaken" placeholder="e.g., 5000" required>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">Record Transaction</button>
                    </form>
                </div>
            </div>
        </section>

        <!-- Chart Section -->
        <section class="chart-section">
            <h2>Monthly Contributions Visualization</h2>
            <div class="chart-container">
                <canvas id="contributionChart"></canvas>
                <button id="toggleTableBtn" class="btn btn-secondary">View as Table</button>
            </div>
        </section>

        <!-- Table Section (Hidden by default) -->
        <section id="tableSection" class="table-section" style="display: none;">
            <h2>Monthly Contributions Data</h2>
            <div class="table-wrapper">
                <table id="contributionTable" class="data-table">
                    <thead>
                        <tr>
                            <th>Month</th>
                            <th>Amount Collected (₹)</th>
                            <th>Interest Earned (₹)</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <tr>
                            <td colspan="4" class="empty-message">No data available</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Money Taken Records Section -->
        <section class="records-section">
            <h2>Money Taken Records</h2>
            <div class="table-wrapper">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Person Name</th>
                            <th>Times Taken Money</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="moneyTakenTableBody">
                        <tr>
                            <td colspan="3" class="empty-message">No records available</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Sheep Expenses Section -->
        <section class="expenses-section">
            <h2>Festival Sheep Expenses</h2>
            <div class="table-wrapper">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Festival/Event</th>
                            <th>Amount (₹)</th>
                            <th>Sheep Count</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="sheepExpenseTableBody">
                        <tr>
                            <td colspan="4" class="empty-message">No expenses recorded</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>
    </div>

    <!-- Simple Canvas for Chart -->
    <script src="app.js"></script>
    <script>
        // Check if user is logged in
        if (!sessionStorage.getItem('loggedIn')) {
            window.location.href = 'index.html';
        }

        // Display username
        const username = sessionStorage.getItem('username');
        document.getElementById('displayUsername').textContent = username;

        // Logout functionality
        document.getElementById('logoutBtn').addEventListener('click', function() {
            sessionStorage.removeItem('loggedIn');
            sessionStorage.removeItem('username');
            window.location.href = 'index.html';
        });

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            window.fundManager = new FundManager();
            window.fundManager.initializeApp();
        });
    </script>
</body>
</html>
